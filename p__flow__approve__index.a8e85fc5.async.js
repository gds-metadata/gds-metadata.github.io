"use strict";(self.webpackChunkquick_admin=self.webpackChunkquick_admin||[]).push([[4854],{98542:function(oe,L,t){t.r(L),t.d(L,{default:function(){return te}});var R=t(97857),b=t.n(R),B=t(5574),S=t.n(B),T=t(67294),O=t(2453),p=t(59782),Z=t.n(p),M=t(61720),A=t(40741),D=t(25921),U=t(14726),$=t(34804),V=[{type:"apply",label:"\u7533\u8BF7",style:{width:"30px",height:"30px",borderRadius:"15px",border:"2px solid #FF6347"},property:{username:"",time:"",startTime:"",endTime:""}},{type:"approver",label:"\u5BA1\u6279",style:{width:"50px",height:"40px",borderRadius:"4px",border:"2px solid #3CB371"}},{type:"jugement",label:"\u5224\u65AD",style:{width:"30px",height:"30px",border:"2px solid #6495ED",transform:"rotate(45deg)"}},{type:"finsh",label:"\u7ED3\u675F",style:{width:"30px",height:"30px",borderRadius:"15px",border:"2px solid #FF6347"}}],F=[{label:"\u76F4\u63A5\u4E0A\u7EA7",value:"leader"},{label:"T3\u9886\u5BFC",value:"t3Leader"},{label:"T2\u9886\u5BFC",value:"t2Leader"},{label:"T1\u9886\u5BFC",value:"t1Leader"}],G={rect:{radius:8,stroke:"#3CB371"},circle:{r:25,stroke:"#FF6347"},polygon:{stroke:"#6495ED"},polyline:{strokeWidth:1},edgeText:{background:{fill:"white"}}},J={nodes:[{id:"28df2fbe-f32b-4a9b-b544-7e70d7187b33",type:"apply",x:210,y:210,text:{x:210,y:210,value:"\u7533\u8BF7"},properties:{}},{id:"64179bd7-c60e-433c-8df7-97c8e98f855d",type:"approver",x:350,y:210,text:{x:350,y:210,value:"\u5BA1\u6279"},properties:{labelColor:"#000000",approveTypeLabel:"\u76F4\u63A5\u4E0A\u7EA7",approveType:"leader"}},{id:"fcb96f10-720e-40e5-8ed0-ebdd0a46f234",type:"jugement",x:510,y:210,text:{x:510,y:210,value:`\u5224\u65AD\u62A5\u9500\u662F\u5426
\u5927\u4E8E1000\u5143`},properties:{api:""}},{id:"9f119df3-c449-4e5d-a67a-cb351b9cbdb5",type:"approver",x:670,y:210,text:{x:670,y:210,value:"\u5BA1\u6279"},properties:{labelColor:"#000000",approveTypeLabel:"T2\u9886\u5BFC",approveType:"t2Leader"}},{id:"ef34f09c-38ea-4ad4-acd2-cc2f464a2be6",type:"finsh",x:850,y:210,text:{x:850,y:210,value:"\u7ED3\u675F"},properties:{}}],edges:[{id:"0d87b1eb-2389-445a-9f34-6227940b2072",type:"polyline",sourceNodeId:"28df2fbe-f32b-4a9b-b544-7e70d7187b33",targetNodeId:"64179bd7-c60e-433c-8df7-97c8e98f855d",startPoint:{x:235,y:210},endPoint:{x:300,y:210},text:{x:51.25,y:0,value:""},properties:{},pointsList:[{x:235,y:210},{x:300,y:210}]},{id:"d99e7451-b379-411e-b0da-df11be8be20a",type:"polyline",sourceNodeId:"64179bd7-c60e-433c-8df7-97c8e98f855d",targetNodeId:"fcb96f10-720e-40e5-8ed0-ebdd0a46f234",startPoint:{x:400,y:210},endPoint:{x:475,y:210},text:{x:437.5,y:210,value:"\u901A\u8FC7"},properties:{},pointsList:[{x:400,y:210},{x:475,y:210}]},{id:"4c615802-15d8-442c-be22-b65430286123",type:"polyline",sourceNodeId:"fcb96f10-720e-40e5-8ed0-ebdd0a46f234",targetNodeId:"9f119df3-c449-4e5d-a67a-cb351b9cbdb5",startPoint:{x:545,y:210},endPoint:{x:620,y:210},text:{x:582.5,y:210,value:"\u662F"},properties:{},pointsList:[{x:545,y:210},{x:620,y:210}]},{id:"934ae03a-6ee0-4568-a2b4-8bcede565e0b",type:"polyline",sourceNodeId:"9f119df3-c449-4e5d-a67a-cb351b9cbdb5",targetNodeId:"ef34f09c-38ea-4ad4-acd2-cc2f464a2be6",startPoint:{x:720,y:210},endPoint:{x:825,y:210},text:{x:-10,y:0,value:""},properties:{},pointsList:[{x:720,y:210},{x:825,y:210}]},{id:"bd5e1dd0-1978-46f7-851b-d31c03aebee9",type:"polyline",sourceNodeId:"64179bd7-c60e-433c-8df7-97c8e98f855d",targetNodeId:"ef34f09c-38ea-4ad4-acd2-cc2f464a2be6",startPoint:{x:350,y:170},endPoint:{x:850,y:185},text:{x:600,y:140,value:"\u9A73\u56DE"},properties:{},pointsList:[{x:350,y:170},{x:350,y:140},{x:850,y:140},{x:850,y:185}]},{id:"453139c3-faa1-4e3a-a413-38f251243baa",type:"polyline",sourceNodeId:"fcb96f10-720e-40e5-8ed0-ebdd0a46f234",targetNodeId:"ef34f09c-38ea-4ad4-acd2-cc2f464a2be6",startPoint:{x:510,y:245},endPoint:{x:850,y:235},text:{x:680,y:275,value:"\u5426"},properties:{},pointsList:[{x:510,y:245},{x:510,y:275},{x:850,y:275},{x:850,y:235}]}]},a=t(85893);function W(d,g,h){var x,y=function(){var e=[];F.forEach(function(r){e.push((0,a.jsx)(M.Z.Option,{value:r.value,children:r.label}))});var u=(0,a.jsx)(A.Z.Item,{className:"form-property",label:"\u5BA1\u6838\u8282\u70B9\u7C7B\u578B",name:"approveType",children:(0,a.jsx)(M.Z,{children:e})});return u},v=function(){var e=(0,a.jsx)(A.Z.Item,{label:"API",name:"api",children:(0,a.jsx)(D.Z,{})});return e},n=function(e,u){F.forEach(function(r){r.value===e.approveType&&(e.approveTypeLabel=r.label)}),g(d.id,e)};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"\u5C5E\u6027\u9762\u677F"}),(0,a.jsxs)(A.Z,{layout:"inline",initialValues:d.properties,onValuesChange:n,children:[(0,a.jsxs)("span",{className:"form-property",children:["\u7C7B\u578B\uFF1A",(0,a.jsx)("span",{children:d.type})]}),(0,a.jsxs)("span",{className:"form-property",children:["\u6587\u6848\uFF1A",(0,a.jsx)("span",{children:(x=d.text)===null||x===void 0?void 0:x.value})]}),d.type==="approver"?y():"",d.type==="jugement"?v():""]},d.id),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:"......"}),(0,a.jsx)("h3",{children:"\u4E1A\u52A1\u5C5E\u6027\u53EF\u6839\u636E\u9700\u8981\u8FDB\u884C\u81EA\u5B9A\u4E49\u6269\u5C55"})]}),(0,a.jsx)("div",{className:"property-panel-footer",children:(0,a.jsx)(U.ZP,{className:"property-panel-footer-hide",type:"primary",icon:(0,a.jsx)($.Z,{}),onClick:h,children:"\u6536\u8D77"})})]})}function z(d){var g=function(y){d.dnd.startDrag({type:y.type,text:y.label})},h=function(){var y=[];return V.forEach(function(v,n){y.push((0,a.jsxs)("div",{className:"approve-node node-".concat(v.type),children:[(0,a.jsx)("div",{className:"node-shape",style:b()({},v.style),onMouseDown:function(){return g(v)}}),(0,a.jsx)("div",{className:"node-label",children:v.label})]},n))}),y};return h()}var K=t(9783),H=t.n(K),Q=t(12444),m=t.n(Q),X=t(72004),N=t.n(X),Y=t(28785),E=t.n(Y),w=t(48374),I=t.n(w),k=t(31996),C=t.n(k),q=t(26037),j=t.n(q);function _(d){var g=function(n){C()(e,n);var l=j()(e);function e(){return m()(this,e),l.apply(this,arguments)}return N()(e,[{key:"getConnectedTargetRules",value:function(){var r=E()(I()(e.prototype),"getConnectedTargetRules",this).call(this),o={message:"\u5F00\u59CB\u8282\u70B9\u53EA\u80FD\u8FDE\u51FA\uFF0C\u4E0D\u80FD\u8FDE\u5165\uFF01",validate:function(i,s){var f=!0;return s&&(f=!1),f}};return r.push(o),r}}]),e}(p.CircleNodeModel);d.register({type:"apply",view:p.CircleNode,model:g});var h=function(n){C()(e,n);var l=j()(e);function e(){return m()(this,e),l.apply(this,arguments)}return N()(e,[{key:"getLabelShape",value:function(){var r=this.props.model,o=r.x,c=r.y,i=r.width,s=r.height,f=r.properties,P=f,re=P.labelColor,ae=P.approveTypeLabel;return(0,p.h)("text",{fill:re,fontSize:12,x:o-i/2+5,y:c-s/2+15,width:50,height:25},ae)}},{key:"getShape",value:function(){var r=this.props.model,o=r.x,c=r.y,i=r.width,s=r.height,f=r.radius,P=this.props.model.getNodeStyle();return(0,p.h)("g",{},[(0,p.h)("rect",b()(b()({},P),{},{x:o-i/2,y:c-s/2,rx:f,ry:f,width:i,height:s})),this.getLabelShape()])}}]),e}(p.RectNode);H()(h,"extendKey","UserTaskNode");var x=function(n){C()(e,n);var l=j()(e);function e(u,r){var o;return m()(this,e),o=l.call(this,u,r),o.properties={labelColor:"#000000",approveTypeLabel:"",approveType:""},o}return N()(e)}(p.RectNodeModel);d.register({type:"approver",view:h,model:x});var y=function(n){C()(e,n);var l=j()(e);function e(u,r){var o;return m()(this,e),o=l.call(this,u,r),o.points=[[35,0],[70,35],[35,70],[0,35]],o.properties={api:""},o}return N()(e)}(p.PolygonNodeModel);d.register({type:"jugement",view:p.PolygonNode,model:y});var v=function(n){C()(e,n);var l=j()(e);function e(){return m()(this,e),l.apply(this,arguments)}return N()(e,[{key:"getConnectedSourceRules",value:function(){var r=E()(I()(e.prototype),"getConnectedSourceRules",this).call(this),o={message:"\u7ED3\u675F\u8282\u70B9\u53EA\u80FD\u8FDE\u5165\uFF0C\u4E0D\u80FD\u8FDE\u51FA\uFF01",validate:function(i){var s=!0;return i&&(s=!1),s}};return r.push(o),r}}]),e}(p.CircleNodeModel);d.register({type:"finsh",view:p.CircleNode,model:v})}var de=t(10114),ee={stopScrollGraph:!0,stopZoomGraph:!0,grid:{size:10,visible:!0,type:"mesh",config:{color:"#DCDCDC"}},keyboard:{enabled:!0},style:G};function te(){var d=(0,T.useState)({}),g=S()(d,2),h=g[0],x=g[1],y=(0,T.useState)(),v=S()(y,2),n=v[0],l=v[1];(0,T.useEffect)(function(){var o=new(Z())(b()(b()({},ee),{},{container:document.querySelector("#graph")}));x(o),_(o),o.render(J),e(o)},[]);var e=function(c){c.on("element:click",function(i){var s=i.data;l(s),console.log(JSON.stringify(c.getGraphData()))}),c.on("connection:not-allowed",function(i){O.ZP.error(i.msg)})},u=function(c,i){var s=h.graphModel.nodesMap[c],f=h.graphModel.edgesMap[c];s?s.model.setProperties(Object.assign(s.model.properties,i)):f&&f.model.setProperties(Object.assign(f.model.properties,i))},r=function(){l(void 0)};return(0,a.jsxs)("div",{className:"approve-example-container",children:[(0,a.jsx)("div",{className:"node-panel",children:z(h)}),(0,a.jsx)("div",{id:"graph",className:"viewport"}),n?(0,a.jsx)("div",{className:"property-panel",children:W(n,u,r)}):""]})}}}]);
