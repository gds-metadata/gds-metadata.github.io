"use strict";(self.webpackChunkquick_admin=self.webpackChunkquick_admin||[]).push([[5682],{46010:function(z,M,e){e.r(M);var I=e(15009),l=e.n(I),K=e(99289),h=e.n(K),W=e(5574),c=e.n(W),d=e(67294),u=e(12578),g=e(69243),S=e(24454),P=e(51806),b=e(44560),y=e(9117),H=e(47448),O=e(54152),i=e(4881),N=e(20640),x=e.n(N),Q=e(53370),V=e(21595),X=e(74508),Y=e(5471),q=e(91441),ee=e(67643),ae=e(5646),a=e(85893),w=function(){var E,F=(0,u.useModel)("@@initialState"),r=F.initialState,f=(0,u.useParams)(),J=(0,d.useState)(!1),C=c()(J,2),o=C[0],j=C[1],Z=(0,d.useState)(!1),p=c()(Z,2),v=p[0],A=p[1],$=(0,d.useState)({}),R=c()($,2),T=R[0],m=R[1];(0,d.useEffect)(function(){function t(){return n.apply(this,arguments)}function n(){return n=h()(l()().mark(function B(){var s;return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,P.J1)({id:f.id});case 3:s=_.sent,s&&s.data&&s.data.schema?m(JSON.parse(s.data.schema)):m({}),_.next=11;break;case 7:_.prev=7,_.t0=_.catch(0),console.error("\u83B7\u53D6schema\u65F6\u53D1\u751F\u9519\u8BEF:",_.t0),m({});case 11:case"end":return _.stop()}},B,null,[[0,7]])})),n.apply(this,arguments)}t()},[]);var L=(0,u.getLocale)();(0,b.Z)(r==null?void 0:r.sysDictData);function U(){return D.apply(this,arguments)}function D(){return D=h()(l()().mark(function t(){var n;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,(0,P.ov)({id:f.id,schema:JSON.stringify(T)});case 3:n=s.sent,n&&n.status===0?i.Am.success("\u4FDD\u5B58\u6210\u529F","\u63D0\u793A"):i.Am.error("\u4FDD\u5B58\u5931\u8D25","\u63D0\u793A"),s.next=11;break;case 7:s.prev=7,s.t0=s.catch(0),console.error("\u4FDD\u5B58\u65F6\u53D1\u751F\u9519\u8BEF:",s.t0),i.Am.error("\u4FDD\u5B58\u5931\u8D25","\u63D0\u793A");case 11:case"end":return s.stop()}},t,null,[[0,7]])})),D.apply(this,arguments)}function G(t){m(t)}function k(){window.close()}return(0,a.jsxs)("div",{className:"Editor",children:[(0,a.jsxs)("div",{className:"Editor-header",children:[(0,a.jsx)("div",{className:"Editor-title",children:"\u9875\u9762\u7F16\u8F91\u5668"}),(0,a.jsx)("div",{className:"Editor-view-mode-group-container",children:(0,a.jsxs)("div",{className:"Editor-view-mode-group",children:[(0,a.jsx)("div",{className:"Editor-view-mode-btn editor-header-icon ".concat(v?"":"is-active"),onClick:function(){A(!1)},children:(0,a.jsx)(g.Z,{})}),(0,a.jsx)("div",{className:"Editor-view-mode-btn editor-header-icon ".concat(v?"is-active":""),onClick:function(){A(!0)},children:(0,a.jsx)(S.Z,{})})]})}),(0,a.jsxs)("div",{className:"Editor-header-actions",children:[(0,a.jsx)(O.jEJ,{}),(0,a.jsx)("div",{className:"header-action-btn m-1 ".concat(o?"primary":""),onClick:function(){j(!o)},children:o?"\u7F16\u8F91":"\u9884\u89C8"}),!o&&(0,a.jsx)("div",{className:"header-action-btn exit-btn",onClick:U,children:"\u4FDD\u5B58"}),!o&&(0,a.jsx)("div",{className:"header-action-btn exit-btn",onClick:k,children:"\u9000\u51FA"})]})]}),(0,a.jsxs)("div",{className:"Editor-inner",children:[(0,a.jsx)(i.qR,{theme:"cxd",position:"top-center",locale:L},"toast"),(0,a.jsx)(i.wx,{theme:"cxd",locale:L},"alert"),(0,a.jsx)(O.MLE,{theme:"cxd",preview:o,isMobile:v,value:T,onChange:G,onPreview:function(){j(!0)},onSave:U,className:"is-fixed",showCustomRenderersPanel:!0,amisEnv:{fetcher:y._,alert:i.Z9,copy:x(),confirm:i.M6},data:{permsCode:r==null||(E=r.currentUser)===null||E===void 0?void 0:E.permsCode}})]})]})};M.default=w},91441:function(){},67643:function(){},53370:function(){},74508:function(){},47448:function(){}}]);
