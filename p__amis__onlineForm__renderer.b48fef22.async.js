"use strict";(self.webpackChunkquick_admin=self.webpackChunkquick_admin||[]).push([[9810],{88530:function(Q,I,e){e.d(I,{FG:function(){return $},Xv:function(){return v},bF:function(){return w},nC:function(){return T},nY:function(){return F}});var B=e(15009),d=e.n(B),R=e(97857),n=e.n(R),U=e(99289),c=e.n(U),S=e(12578);function T(u,l){return j.apply(this,arguments)}function j(){return j=c()(d()().mark(function u(l,i){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,S.request)("/api/online/form/getFormById",n()({method:"GET",params:{id:l}},i||{})));case 1:case"end":return r.stop()}},u)})),j.apply(this,arguments)}function v(u,l){return _.apply(this,arguments)}function _(){return _=c()(d()().mark(function u(l,i){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,S.request)("/api/online/form/getFormSchemaById",n()({method:"GET",params:n()({},l)},i||{})));case 1:case"end":return r.stop()}},u)})),_.apply(this,arguments)}function $(u,l){return b.apply(this,arguments)}function b(){return b=c()(d()().mark(function u(l,i){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,S.request)("/api/online/form/updateById",n()({method:"PUT",data:l},i||{})));case 1:case"end":return r.stop()}},u)})),b.apply(this,arguments)}function w(u,l){return P.apply(this,arguments)}function P(){return P=c()(d()().mark(function u(l,i){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,S.request)("/api/online/form/updateSchemaById",n()({method:"PUT",headers:{"Content-Type":"multipart/form-data"},data:l},i||{})));case 1:case"end":return r.stop()}},u)})),P.apply(this,arguments)}function F(u,l){return M.apply(this,arguments)}function M(){return M=c()(d()().mark(function u(l,i){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,S.request)("/api/online/form/publishForm",n()({method:"PUT",data:n()({status:"2"},l)},i||{})));case 1:case"end":return r.stop()}},u)})),M.apply(this,arguments)}},37004:function(Q,I,e){e.r(I),e.d(I,{default:function(){return ae}});var B=e(64599),d=e.n(B),R=e(15009),n=e.n(R),U=e(99289),c=e.n(U),S=e(5574),T=e.n(S),j=e(67294),v=e(12578),_=e(14726),$=e(5121),b=e(20640),w=e.n(b),P=e(34436),F=e(4881),M=e(9311),u=e(21595),l=e(5471),i=e(9117),E=e(44560),r=e(88530),V=e(97857),Z=e.n(V);function x(C,y){return L.apply(this,arguments)}function L(){return L=c()(n()().mark(function C(y,A){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,v.request)("/v1/business/apply",Z()({method:"POST",data:y},A||{})));case 1:case"end":return f.stop()}},C)})),L.apply(this,arguments)}function q(C,y){return G.apply(this,arguments)}function G(){return G=c()(n()().mark(function C(y,A){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,v.request)("/v1/business/approve",Z()({method:"POST",headers:{"Content-Type":"multipart/form-data"},data:y},A||{})));case 1:case"end":return f.stop()}},C)})),G.apply(this,arguments)}var de=e(33677),h=e(85893),ee=function(){var y,A=(0,v.useModel)("@@initialState"),D=A.initialState,f=(0,j.useState)({}),J=T()(f,2),re=J[0],K=J[1],ne=(0,j.useState)({}),Y=T()(ne,2),N=Y[0],te=Y[1],se=(0,j.useState)({}),k=T()(se,2),ue=k[0],le=k[1],H=(0,v.useLocation)();(0,j.useEffect)(function(){var o;function t(O){return s.apply(this,arguments)}function s(){return s=c()(n()().mark(function O(a){var g;return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,(0,r.Xv)({id:a});case 3:g=m.sent,g&&g.data&&g.data.schema?(K(JSON.parse(g.data.schema)),te(g.data),le(g.data.id)):K({}),m.next=11;break;case 7:m.prev=7,m.t0=m.catch(0),console.error("\u83B7\u53D6schema\u65F6\u53D1\u751F\u9519\u8BEF:",m.t0),K({});case 11:case"end":return m.stop()}},O,null,[[0,7]])})),s.apply(this,arguments)}var p=(o=H.pathname.split("/online/form/")[1])!==null&&o!==void 0?o:H.pathname.split("/online/form/")[1];t(p)},[]),(0,E.Z)(D==null?void 0:D.sysDictData);var ie=function(){var o=c()(n()().mark(function t(){var s,p;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=new FormData(document.getElementsByTagName("form")[0]),N.formData=oe(s),N.formId=ue.toString(),a.next=6,x(N);case 6:p=a.sent,console.log("\u7533\u8BF7\u63D0\u4EA4\u6210\u529F",p),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.error("\u7533\u8BF7\u63D0\u4EA4\u5931\u8D25",a.t0);case 13:case"end":return a.stop()}},t,null,[[0,10]])}));return function(){return o.apply(this,arguments)}}(),oe=function(t){var s={},p=d()(t.entries()),O;try{for(p.s();!(O=p.n()).done;){var a=T()(O.value,2),g=a[0],z=a[1];s[g]=z}}catch(m){p.e(m)}finally{p.f()}return s},X=function(){var o=c()(n()().mark(function t(s){var p;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,q({});case 3:p=a.sent,console.log("\u5BA1\u6279\u6210\u529F",p),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error("\u5BA1\u6279\u5931\u8D25",a.t0);case 10:case"end":return a.stop()}},t,null,[[0,7]])}));return function(s){return o.apply(this,arguments)}}();function me(){window.close()}var W=(0,v.getLocale)();return(0,h.jsxs)("div",{className:"runtime-keep-alive-layout",children:[(0,h.jsx)(F.qR,{theme:i.r,position:"top-center",locale:W},"toast"),(0,h.jsx)(F.wx,{theme:i.r,locale:W},"alert"),(0,P.sYA)(re,{locale:W,context:{permsCode:D==null||(y=D.currentUser)===null||y===void 0?void 0:y.permsCode}},{fetcher:i._,isCancel:function(t){return $.Z.isCancel(t)},copy:function(t){w()(t),F.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:i.r,jumpTo:function(t,s){if(s&&s.actionType==="url"&&s.blank===!1){v.history.push(t);return}else if(s&&s.blank){window.open(t,"_blank");return}else v.history.push(t)}}),(0,h.jsx)("div",{className:"operation-area",children:(0,h.jsxs)("div",{className:"operation-buttons",children:[(0,h.jsx)(_.ZP,{type:"primary",onClick:ie,children:"\u63D0\u4EA4"}),(0,h.jsx)(_.ZP,{className:"antd-Button--success",onClick:function(){return X("Y")},children:"\u901A\u8FC7"}),(0,h.jsx)(_.ZP,{onClick:function(){return X("N")},danger:!0,children:"\u4E0D\u901A\u8FC7"}),(0,h.jsx)(_.ZP,{onClick:me,children:"\u53D6\u6D88"})]})})]})},ae=ee}}]);
